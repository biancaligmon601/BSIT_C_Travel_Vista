<!--Bohol Map-->

<!DOCTYPE html>

<html lang="en">

<head>

    <meta charset="UTF-8">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Map and Weather App</title>



    <link

     rel="stylesheet"

     href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"

     integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="

     crossorigin=""/>

   

    <link rel="stylesheet" href="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.css" />



    <link rel="stylesheet" href="style2.css">



    <style>

       .search-box button {

            background-color: #007bff; /* A nice blue color */

            color: white;              /* White text for contrast */

            padding: 8px 15px;

            border: none;

            border-radius: 4px;

            cursor: pointer;

            font-size: 16px;

            margin-left: 10px;

        }

       

        /* Basic styles for the layout */

        body {

            font-family: Arial, sans-serif;

            margin: 0;

            padding: 20px;

            background-color: #f4f4f4;

        }



        .wrapper {

            display: flex;

            gap: 20px;

            flex-wrap: wrap;

            max-width: 1200px;

            margin: auto;

        }



        .container {

            flex: 1;

            min-width: 300px;

            padding: 20px;

            background: white;

            border-radius: 8px;

            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);

        }



        /* Essential Fix: Give the map a definite height and width */

        #map {

            height: 600px;

            width: 250%;

            flex: 2;

            border-radius: 8px;

            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);

        }



        .error {

            color: red;

        }

       

        /* üî• FINAL FIX: Pop-up Image Styling (Limits size to 200px x 200px max) */

        .leaflet-popup-content img {

            max-width: 300px;  /* Limits the width */

            max-height: 200px; /* Limits the height */

            width: auto;       /* Maintains aspect ratio */

            height: auto;      /* Maintains aspect ratio */

            display: block;

            margin-bottom: 10px;

            border-radius: 4px;

        }

    </style>



    <script

     src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"

     integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="

     crossorigin="">

    </script>

   

    <script src="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.js"></script>



</head>



<body>

<div class="wrapper">



    <div class="container">

        <h1>üå¶Ô∏èWeather App</h1>



        <div class="search-box">

            <input type="text" id="cityInput" placeholder="Enter city name">

            <button id="searchBtn">Search</button>

        </div>



        <div class="weather-card" id="weatherCard" style="display:none;">

            <h2 id="cityName"></h2>

            <img id="weatherIcon">

            <p id="description"></p>

            <p><strong>Temperature:</strong> <span id="temperature"></span>¬∞C</p>

            <p><strong>Humidity:</strong> <span id="humidity"></span>%</p>

            <p><strong>Sea Level:</strong> <span id="seaLevel"></span> hPa</p>

            <p><strong>Wind:</strong> <span id="wind"></span> km/h</p>

        </div>



        <p id="errorMsg" class="error"></p>

    </div>



    <div id="map"></div>



</div>



<script>

    // --- MAP INITIALIZATION ---

    var map = L.map('map').setView([9.84999, 124.14354], 9);

    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);



    // Add Geocoding control for search functionality

    L.Control.geocoder({

        position: 'topleft'

    }).addTo(map);



    // --- GEOMETRIC SHAPE FOR BOHOL (L.circle for fixed geographic size) ---

    var boholShape = L.circle([9.84999, 124.14354], {

        // Radius in meters (M). 45,000m (45km) is an estimate for the island's area.

        radius: 45000,

        color: 'red',        

        fillColor: '#f03',  

        fillOpacity: 0.2,    

        weight: 3            

    }).addTo(map)

      .bindPopup("Loading details..."); // Attach the pop-up to the shape



    // --- POP-UP DATA LOADING ---

    boholShape.on('popupopen', function (e) {

        // Fetch data using the local file path

        fetch('Bohol.json')

            .then(response => {

                if (!response.ok) {

                    throw new Error(`HTTP error! status: ${response.status}. Check if 'Bohol.json' is in the same folder.`);

                }

                return response.json();

            })

            .then(data => {

                // Access the Bohol object

                const boholData = data.Bohol;



                // Build the pop-up content

                const content = `

                    <img src="${boholData.Image_URL}" alt="${boholData.Name}">

                    <b>${boholData.Name}</b><br>

                    <p>${boholData.Description}</p>

                    <small>Lat: ${boholData.Latitude}, Lng: ${boholData.Longitude}</small>

                `;

               

                // Update the pop-up content

                e.popup.setContent(content);

            })

            .catch(error => {
                console.error('Error fetching JSON data:', error);
                e.popup.setContent('Error loading details. Please ensure Bohol.json exists.');
            });
    });
</script>
</body>
</html>